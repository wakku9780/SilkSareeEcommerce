<!DOCTYPE html>
<html lang="en" class="scroll-smooth" x-data="{ 
    theme: localStorage.getItem('theme') || 'luxury',
    mobileMenuOpen: false,
    cartOpen: false,
    searchOpen: false,
    userMenuOpen: false
}" x-init="$watch('theme', val => localStorage.setItem('theme', val))">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="@ViewData["Description"] ?? "Discover exquisite silk sarees crafted with traditional artistry and modern elegance. Premium quality, authentic designs, and timeless beauty." />
    <meta name="keywords" content="@ViewData["Keywords"] ?? "silk sarees, traditional sarees, designer sarees, wedding sarees, ethnic wear, Indian fashion" />
    <meta name="author" content="Silk Sarees E-commerce" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="@Context.Request.GetDisplayUrl()" />
    <meta property="og:title" content="@ViewData["Title"] ?? "Silk Sarees - Premium Traditional Elegance" />
    <meta property="og:description" content="@ViewData["Description"] ?? "Discover exquisite silk sarees crafted with traditional artistry and modern elegance." />
    <meta property="og:image" content="@ViewData["Image"] ?? "/images/og-image.jpg" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="@Context.Request.GetDisplayUrl()" />
    <meta property="twitter:title" content="@ViewData["Title"] ?? "Silk Sarees - Premium Traditional Elegance" />
    <meta property="twitter:description" content="@ViewData["Description"] ?? "Discover exquisite silk sarees crafted with traditional artistry and modern elegance." />
    <meta property="twitter:image" content="@ViewData["Image"] ?? "/images/og-image.jpg" />
    
    <title>@ViewData["Title"] - Silk Sarees</title>
    
    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" as="style">
    
    <!-- Theme-specific CSS classes -->
    <style>
        .theme-luxury { --primary: #e35a0f; --secondary: #f59e0b; --accent: #be185d; --text: #1f2937; --bg: #ffffff; }
        .theme-minimal { --primary: #64748b; --secondary: #94a3b8; --accent: #ec4899; --text: #334155; --bg: #f8fafc; }
    </style>
    
    <!-- Tailwind CSS -->
    <link href="~/css/tailwind.css" rel="stylesheet" />
    
    <!-- Custom CSS -->
    <link href="~/css/site.css" rel="stylesheet" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Silk Sarees E-commerce",
        "url": "@Context.Request.GetDisplayUrl()",
        "logo": "@Context.Request.Scheme://@Context.Request.Host/images/logo.png",
        "description": "Premium silk sarees crafted with traditional artistry and modern elegance"
    }
    </script>
</head>

<body class="theme-luxury" :class="theme === 'luxury' ? 'theme-luxury' : 'theme-minimal'">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-white px-4 py-2 rounded-md z-50">
        Skip to main content
    </a>

    <!-- Header -->
    <partial name="_Header" />

    <!-- Main Content -->
    <main id="main-content" class="min-h-screen">
        @RenderBody()
    </main>

    <!-- Footer -->
    <partial name="_Footer" />

    <!-- Cart Drawer -->
    <partial name="_CartDrawer" />

    <!-- Search Modal -->
    <partial name="_SearchModal" />

    <!-- Quick View Modal -->
    <partial name="_QuickViewModal" />

    <!-- Theme Switcher -->
    <div class="fixed bottom-6 right-6 z-50">
        <button 
            @click="theme = theme === 'luxury' ? 'minimal' : 'luxury'"
            class="group relative bg-white dark:bg-gray-800 p-3 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300"
            :title="theme === 'luxury' ? 'Switch to Minimal Theme' : 'Switch to Luxury Theme'"
            aria-label="Toggle theme">
            
            <!-- Luxury Theme Icon -->
            <svg x-show="theme === 'luxury'" class="w-6 h-6 text-luxury-600" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
            
            <!-- Minimal Theme Icon -->
            <svg x-show="theme === 'minimal'" class="w-6 h-6 text-pastel-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
            </svg>
            
            <!-- Tooltip -->
            <div class="absolute bottom-full right-0 mb-2 px-2 py-1 text-sm text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
                <span x-text="theme === 'luxury' ? 'Minimal Theme' : 'Luxury Theme'"></span>
            </div>
        </button>
    </div>

    <!-- Back to Top Button -->
    <button 
        @click="window.scrollTo({top: 0, behavior: 'smooth'})"
        class="fixed bottom-6 left-6 z-50 bg-primary text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 opacity-0 hover:opacity-100"
        :class="{ 'opacity-100': window.scrollY > 300 }"
        aria-label="Back to top">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
    </button>

    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="~/js/site.js"></script>
    
    <!-- Lazy Loading -->
    <script>
        // Intersection Observer for lazy loading images
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });

            document.querySelectorAll('img[data-src]').forEach(img => {
                imageObserver.observe(img);
            });
        }
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>